(function(e,t){"use strict";if(e.History==t)throw new Error("History.js is needed");if(e.HistoryEnhance!=t)return;var n=e.History,r=e.HistoryEnhance=e.HistoryEnhance||{},i=null,s=[],o=n.pushState,u=n.replaceState;n.pushState=function(e,t,r,s,u){o(e,t,r,s,u),u!=1&&(i=n.getState())},n.replaceState=function(e,t,r,s){u(e,t,r,s),i=n.getState()},n.Adapter.bind(e,"popstate",function(t){var r=i;if(r==null)return;var o=i=n.getState(),u=!0;if(s.length>0){var a=s[s.length-1];a.id==o.id&&(u=!1)}u?(s.push(r),n.Adapter.trigger(e,"navigation-backward",[r,o])):(s.pop(),n.Adapter.trigger(e,"navigation-forward",[r,o]))})})(window)